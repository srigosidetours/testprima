---
// GlobeBackgroundCyber.astro
const { mensaje = 'Bienvenido' } = Astro.props;
---

<div
  data-mensaje={mensaje}
  id="cyberContainer"
  class="bg-gradient-to-r from-blue-500 to-purple-600 via-transparent via-blue-700 animate-gradient bg-[length:400%_400%] relative"
>
  <div
    id="cyberGlobe"
    class="p-1 inset-0 bg-transparent z-0 font-mono text-[clamp(10px,2.80vw,24px)] leading-none text-purple-400 text-center overflow-hidden"
    style="filter: blur(0px);"
  >
  </div>
</div>

<style>
  @keyframes gradientAnimation {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  .animate-gradient {
    animation: gradientAnimation 20s ease infinite;
  }

  @keyframes pulseDiagonal {
    0% {
      transform: translate(-50%, -50%) rotate(-10deg) scale(1);
      opacity: 1;
    }
    50% {
      transform: translate(-50%, -50%) rotate(-10deg) scale(1.2);
      opacity: 1;
    }
    100% {
      transform: translate(-50%, -50%) rotate(-10deg) scale(1);
      opacity: 1;
    }
  }
</style>



<script is:inline>
  // CÃ³digo del globo animado (se mantiene sin cambios)
  eval(
    (z =
      'p="<"+"pre>"/* ,.oq#+     ,._, */;for(y in n="zw24l6k\
4e3t4jnt4qj24xh2 x/* =<,m#F^    A W###q. */42kty24wrt413n243n\
9h243pdxt41csb yz/* #K       q##H######Am */43iyb6k43pk7243nm\
r24".split(4)){/* dP      cpq#q##########b, */for(a in t=pars\
eInt(n[y],36)+/*         p##@###YG=[#######y */(e=x=r=[]))for\
(r=!r,i=0;t[a/*         d#qg `*PWo##q#######D */]>i;i+=.05)wi\
th(Math)x-= /*        sergiorig Q###KWR#### W[ */.05,0<cos(o=\
new Date/1e3/*      .Q#########Md#.###OP  A@ , */-x/PI)&&(e[~\
~(32*sin(o)*/* ,    (W#####Xx######.P^     T % */sin(.5+y/7))\
+60] =-~ r);/* #y    `^TqW####P###BP           */for(x=0;122> \
x;)p+="   *#"/* b.        OQ####x#K           */[e[x++]+e[x++\
]]||(S=("eval"/* l         `X#####D  ,       */+"(z=\'"+z.spl\
it(B = "\\\\")./*           G####B" #       */join(B+B).split\
(Q="\'").join(B+Q/*          VQBP`        */)+Q+")//m1k")[x/2\
+61*y-1]).fontcolor/*         TP         */(/\\w/.test(S)&&"#\
03B");document.getElementById("cyberGlobe").innerHTML=p+=B+"\\n"}setTimeout(z)'),
  );

  // overlay2 de bienvenida con efecto pulsante y diagonal

  //miro la prop
  let msg = document.querySelector(`#cyberContainer`).dataset.mensaje;

  const overlay2 = document.createElement("div");
  overlay2.innerHTML = msg;
  overlay2.id = "cyberOverlay2";
  Object.assign(overlay2.style, {
    position: "absolute",
    top: "20%",
    left: "20%",
    transform: "translate(-50%, -50%) rotate(-10deg)",
    zIndex: "9999", // Queda sobre el resto
    color: "#FFF", 
    fontFamily: "monospace, sans-serif",
    fontSize: "clamp(12px,3vw,28px)",
    textAlign: "center",
    padding: "12px 24px",
    animation: "pulseDiagonal 10s ease-in-out infinite",
  });
  document.getElementById("cyberContainer").appendChild(overlay2);

  // overlay2 para la imagen vectorial (SVG) con efecto neon
  const vectorImage2 = document.createElement("img");
  vectorImage2.src = "https://www.svgrepo.com/show/508465/flag-ceu.svg";
  vectorImage2.alt = "Imagen vectorial";
  Object.assign(vectorImage2.style, {
    position: "absolute",
    top: "50%",
    left: "50%",
    transform: "translate(-50%, -50%)",
    zIndex: "5000", // Entre el fondo desenfocado y el texto
    width: "30vw", // Responsivo
    height: "auto",
    maxWidth: "100%",
    filter: "drop-shadow(0 0 15px #ff00ff50)",
  });
  document.getElementById("cyberContainer").appendChild(vectorImage2);
</script>
